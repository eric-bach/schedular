type Data @model @aws_cognito_user_pools {
  pk: String
  sk: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
  type: String
  duration: Int
  status: String
  confirmationId: String
  customer: String
  firstName: String
  lastName: String
  email: String
  phone: Int
}

input CustomerInput {
  id: String
  name: String
  email: String
  phone: String
}

input BookingInput {
  pk: String!
  sk: String!
  customer: CustomerInput!
}

input LastEvaluatedKey {
  pk: ID
  sk: String
}

type LastEvaluatedKeyViewModel {
  pk: ID
  sk: String
}

type CustomerViewModel {
  name: String
  email: String
  phone: String
}

type AppointmentDetailsViewModel {
  date: AWSDate
  startTime: String
  endTime: String
  duration: Int
}

type AppointmentViewModel {
  pk: String
  sk: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
  type: String
  appointmentDetails: AppointmentDetailsViewModel
  status: String
  confirmationId: String
}

type GetAppointmentsResponse {
  items: [AppointmentViewModel]
  lastEvaluatedKey: LastEvaluatedKeyViewModel
}

type CustomerAppointmentViewModel {
  pk: String
  sk: String
  createdAt: AWSDateTime
  updatedAt: AWSDateTime
  type: String
  appointmentDetails: AppointmentDetailsViewModel
  customerId: String
  customerDetails: CustomerViewModel
  status: String
  confirmationId: String
}

type GetCustomerAppointmentsResponse {
  items: [CustomerAppointmentViewModel]
  lastEvaluatedKey: LastEvaluatedKeyViewModel
}

type BookAppointmentResponse {
  pk: ID
  sk: String
  confirmationId: String
  status: String
  appointmentDetails: AppointmentDetailsViewModel
  customerId: String
  customerDetails: CustomerViewModel
  updatedAt: AWSDateTime
}

# GraphQL actions
type Query {
  getAvailableAppointments(date: String!, lastEvaluatedKey: LastEvaluatedKey): GetAppointmentsResponse
    @aws_cognito_user_pools(cognito_groups: ["Users", "Admins"])
  getAppointments(date: String!, lastEvaluatedKey: LastEvaluatedKey): GetAppointmentsResponse
    @aws_cognito_user_pools(cognito_groups: ["Admins"])

  getCustomerAppointments(customerId: String!, date: String!, lastEvaluatedKey: LastEvaluatedKey): GetCustomerAppointmentsResponse
    @aws_cognito_user_pools(cognito_groups: ["Users", "Admins"])
}

type Mutation {
  bookAppointment(bookingInput: BookingInput): BookAppointmentResponse @aws_cognito_user_pools(cognito_groups: ["Users", "Admins"])
}

schema {
  query: Query
  mutation: Mutation
}
